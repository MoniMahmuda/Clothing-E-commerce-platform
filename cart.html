<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shopping Cart</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<h2>Shopping Cart</h2>

<label>Name:</label>
<input type="text" id="customer_name" placeholder="Your Name"><br><br>

<label>Email:</label>
<input type="email" id="customer_email" placeholder="Your Email"><br><br>

<div id="cart-items"></div>
<button id="checkout">Place Order</button>

<script>
// Example cart items
let cart = [
    {name: "Jamdani saree", size:"N", qty:1, price:30},
    {name: "Sari", size:"N", qty:1, price:40}
];

function showCart(){
    if(cart.length === 0){
        $("#cart-items").html("<p>Cart is empty</p>");
        return;
    }
    let html = "<table border='1' cellpadding='5'><tr><th>Product</th><th>Size</th><th>Qty</th><th>Price</th></tr>";
    cart.forEach(item => {
        html += `<tr>
            <td>${item.name}</td>
            <td>${item.size}</td>
            <td>${item.qty}</td>
            <td>${item.price}</td>
        </tr>`;
    });
    html += "</table>";
    $("#cart-items").html(html);
}

showCart();

$("#checkout").click(function(){
    let name = $("#customer_name").val().trim();
    let email = $("#customer_email").val().trim();

    if(name === "" || email === ""){
        alert("Please enter your name and email.");
        return;
    }

    if(cart.length === 0){
        alert("Cart is empty!");
        return;
    }

    $.ajax({
        url: "save_order.php",
        method: "POST",
        contentType: "application/json",
        data: JSON.stringify({customer_name: name, customer_email: email, cart: cart}),
        success: function(res){
            if(res.success){
                alert(res.message);
                cart = [];
                showCart();
                $("#customer_name").val("");
                $("#customer_email").val("");
            } else {
                alert("Error: "+res.message);
            }
        },
        error: function(err){
            alert("AJAX Error: " + err.responseText);
        }
    });
});
</script>

</body>
</html>
